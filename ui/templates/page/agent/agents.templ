package agent

import (
	"github.com/soltiHQ/control-plane/internal/ui/policy"
	"github.com/soltiHQ/control-plane/internal/ui/routepath"
	"github.com/soltiHQ/control-plane/internal/ui/trigger"
	"github.com/soltiHQ/control-plane/ui/templates/component/datagrid"
	"github.com/soltiHQ/control-plane/ui/templates/layout"
)

templ Agents(nav policy.Nav) {
	@layout.App("Agents", "agents", nav) {
		<div class="space-y-6">
			<h1 class="text-2xl font-bold text-fg">
				Agents
			</h1>

			<div
				id="agents-list"
				hx-get={ routepath.ApiAgents }
				hx-trigger={ "load, " + trigger.Every1m }
				hx-target="this"
				hx-swap="innerHTML"
				class="min-h-[120px]"
			>
				@datagrid.Preload("Loading...")
			</div>
		</div>
	}
}
