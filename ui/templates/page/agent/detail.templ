package agent

import (
	"github.com/soltiHQ/control-plane/internal/uikit/policy"
	"github.com/soltiHQ/control-plane/internal/uikit/routepath"
	"github.com/soltiHQ/control-plane/internal/uikit/trigger"
	"github.com/soltiHQ/control-plane/ui/templates/layout"
)

// Detail renders the agent detail page with sidebar + tasks panels.
templ Detail(nav policy.Nav, agentID string) {
	@layout.DetailPage("Agent", "agents", nav,
		layout.DetailPanel{
			ID:         "agent-identity",
			URL:        routepath.ApiAgentByID(agentID),
			Trigger:    "load, " + trigger.Every1m + ", " + trigger.AgentUpdate + " from:body",
			PreloadMsg: "Details Loading...",
		},
		layout.DetailPanel{
			ID:         "agent-tasks",
			URL:        routepath.ApiAgentTasks(agentID),
			Trigger:    "load, " + trigger.AgentTasksRefresh,
			PreloadMsg: "Loading tasks...",
		},
	)
}
